<div class="game slither-container" style="position: relative; overflow: hidden; border-radius: 10px; background: #000; height: 500px; max-height: 70vh;">
  <h2>Slither.io Mini (Singleplayer)</h2>
  <div id="slither-ui" style="position: absolute; top: 10px; left: 10px; color: white; z-index: 10; font-size: 1.2em; font-weight: bold;">
    Score: <span id="score">0</span> | Länge: <span id="length">20</span>
  </div>
  <canvas id="slither-canvas" style="width:100%; height:100%; touch-action: none; cursor: none;"></canvas>
  <p style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: #aaa; font-size: 0.85em; margin: 0; pointer-events: none; z-index: 5; text-align: center;">
    Finger/Maus = lenken | Doppeltippen/Leertaste = Boost (Schwanz schrumpft!)
  </p>
</div>

<script>
// ULTRA-REALISTISCHE SLITHER.IO NACHBAUUNG – mit Gegnern + echter Physik

const canvas = document.getElementById('slither-canvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('score');
const lengthEl = document.getElementById('length');

let width, height;
function resize() {
  const rect = canvas.getBoundingClientRect();
  width = canvas.width = rect.width;
  height = canvas.height = rect.height;
}
window.addEventListener('resize', resize);
resize();

// === SPIELER ===
let player = {
  segments: [],
  angle: 0,
  speed: 2.8,
  boost: false,
  boostTimer: 0,
  score: 0
};

// === GEGNER ===
let enemies = [];
class Enemy {
  constructor() {
    this.segments = [];
    this.angle = Math.random() * Math.PI * 2;
    this.speed = 1.8 + Math.random() * 0.8;
    this.color = `hsl(${Math.random()*360}, 80%, 55%)`;
    this.size = 18 + Math.random() * 8;
    this.targetX = Math.random() * width;
    this.targetY = Math.random() * height;
    this.alive = true;
    
    // Startposition
    for (let i = 0; i < 15 + Math.random()*10; i++) {
      this.segments.push({x: width/2 + (Math.random()-0.5)*100, y: height/2 + (Math.random()-0.5)*100});
    }
  }
  
  update() {
    if (!this.alive || this.segments.length < 3) return;
    
    // Neues Ziel (ändert sich langsam)
    if (Math.random() < 0.02) {
      this.targetX = Math.random() * width;
      this.targetY = Math.random() * height;
    }
    
    const dx = this.targetX - this.segments[0].x;
    const dy = this.targetY - this.segments[0].y;
    this.angle = Math.atan2(dy, dx);
    
    // Bewegung mit echter Schwanz-Physik
    const head = {
      x: this.segments[0].x + Math.cos(this.angle) * this.speed,
      y: this.segments[0].y + Math.sin(this.angle) * this.speed
    };
    
    // Wrap around
    head.x = (head.x + width) % width;
    head.y = (head.y + height) % height;